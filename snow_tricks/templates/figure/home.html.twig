{% extends 'base.html.twig' %}

{% block title %}Accueil{% endblock %}

{% block full_width %}
    <div id="intro" class="container">
        <div class="row align-items-center">
            <div class="col-12 col-md-4 p-4 p-md-0 intro-img">
                <img src="{{ asset('assets/images/snowboard_silhouette.png') }}" width="300" class="d-block mx-auto my-4 rounded-circle img-fluid">
            </div>
            <div class="col-12 col-md-8 p-4 p-md-0 intro-text">
                <h1 class="fs-1">SnowTricks</h1>
                <p class="fs-4">Le site communautaire dédié à la pratique du snowboard !</p>
            </div>
        </div>
    </div>
{% endblock full_width %}

{% block body %}

    {% if figures is empty %}

        <h2>Désolé...</h2>
        <p>Il n'y a pas encore de figure. Revenez un peu plus tard !</p>

    {% else %}

        {% include '_parts/figure_grid.part.twig' %}

        {% if pageTotal > app.request.get('page') %}
            <div class="pagination justify-content-center">
                <a id="load-more" class="btn btn-primary btn-lg mt-4" href="{{ path('app_loadmore', {'page': app.request.get('page') + 1}) }}">Voir plus</a>
            </div>
        {% endif %}

    {% endif %}

    <script>
        function onClickBtn(event) {
            event.preventDefault();

            // On envoie une requête Ajax vers le href du lien avec la méthode GET
            fetch(this.getAttribute("href"), {
                method: "GET",
                headers: {
                    "X-Requested-With": "XMLHttpRequest",
                    "Content-Type": "application/json"
                }
            }).then(
                // On récupère la réponse en JSON
                response => response.json()
            )
        }

        let btn = document.querySelector('#load-more');

        btn.addEventListener('click', onClickBtn);
    </script>

{% endblock %}
