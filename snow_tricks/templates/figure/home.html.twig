{% extends 'base.html.twig' %}

{% block title %}Liste des figures{% endblock %}

{% block catchphrase %}
    <div id="intro" class="container">
        <div class="row align-items-center">
            <div class="col-12 col-md-4 p-4 p-md-0 intro-img">
                <img src="{{ asset('assets/images/snowboard_silhouette.png') }}" width="300" class="d-block mx-auto my-4 rounded-circle img-fluid">
            </div>
            <div class="col-12 col-md-8 p-4 p-md-0 intro-text">
                <h1 class="fs-1">SnowTricks</h1>
                <p class="fs-4">Le site communautaire dédié à la pratique du snowboard !</p>
            </div>
        </div>
    </div>
{% endblock catchphrase %}

{% block body %}

    {% if figures is empty %}

        <h2>Désolé...</h2>
        <p>Il n'y a pas encore de figure. Revenez un peu plus tard !</p>

    {% else %}

        {% for figure in figures %}

            <h2>{{ figure.name }}</h2>
            {% set firstImage = figure.FigureImages|first %}
            {% if firstImage %}
                <img src="{{ asset('/uploads/images/'~firstImage.filename) }}">
            {% else %}
                {# @TODO : Add default image #}
            {% endif %}
            <p>{{ figure.description }}</p>

            <small>
                Par {{ figure.user.userIdentifier|default("Anonyme")|capitalize }}, dans la catégorie

                {% if figure.category is not null %}
                    <a href="{{ path('app_figures_by_category', {id: figure.category.id, slug: figure.category.slug}) }}">{{ figure.category.name|capitalize }}</a>
                {% else %}
                    Non-classé
                {%endif%}

                le {{ figure.createdAt|date("d/m/Y \à H\\hi")}}</small>
            <div>
                <a href="{{ path('app_figure_show', {'id': figure.id, 'slug': figure.slug}) }}">Voir</a> -
                <a href="{{ path('app_figure_edit', {'id': figure.id, 'slug': figure.slug}) }}">Éditer</a>
            </div>
        {% endfor %}

    {% endif %}

{% endblock %}
